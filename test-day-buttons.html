<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Day Button Test</title>
    <link rel="stylesheet" href="styles.css">
    <style>
        body { padding: 2rem; font-family: Arial, sans-serif; }
        .test-section { margin-bottom: 2rem; }
        .day-button { margin-right: 0.5rem; }
        #console { 
            background: #f5f5f5; 
            padding: 1rem; 
            border: 1px solid #ddd; 
            margin-top: 1rem;
            max-height: 200px;
            overflow-y: auto;
            font-family: monospace;
        }
    </style>
</head>
<body>
    <h1>Day Button Click Test</h1>
    
    <div class="test-section">
        <h3>üí™ Sport Tracking</h3>
        <div class="day-button" data-type="sport" data-day="1">MO</div>
        <div class="day-button" data-type="sport" data-day="2">DI</div>
        <div class="day-button" data-type="sport" data-day="3">MI</div>
        <div class="day-button" data-type="sport" data-day="4">DO</div>
        <div class="day-button" data-type="sport" data-day="5">FR</div>
        <div class="day-button" data-type="sport" data-day="6">SA</div>
        <div class="day-button" data-type="sport" data-day="0">SO</div>
        <span id="sportCount">0/7 Tage</span>
    </div>

    <div class="test-section">
        <h3>ü•ó Nutrition Tracking</h3>
        <div class="day-button" data-type="nutrition" data-day="1">MO</div>
        <div class="day-button" data-type="nutrition" data-day="2">DI</div>
        <div class="day-button" data-type="nutrition" data-day="3">MI</div>
        <div class="day-button" data-type="nutrition" data-day="4">DO</div>
        <div class="day-button" data-type="nutrition" data-day="5">FR</div>
        <div class="day-button" data-type="nutrition" data-day="6">SA</div>
        <div class="day-button" data-type="nutrition" data-day="0">SO</div>
        <span id="nutritionCount">0/7 Tage</span>
    </div>

    <div class="test-section">
        <h3>üï∞Ô∏è Work 7AM Tracking</h3>
        <div class="day-button" data-type="work7am" data-day="1">MO</div>
        <div class="day-button" data-type="work7am" data-day="2">DI</div>
        <div class="day-button" data-type="work7am" data-day="3">MI</div>
        <div class="day-button" data-type="work7am" data-day="4">DO</div>
        <div class="day-button" data-type="work7am" data-day="5">FR</div>
        <span id="work7amCount">0/5 Tage</span>
    </div>
    
    <div id="console">Console output will appear here...</div>

    <script>
        // Simple test implementation
        let weeklyTrackingData = {};
        let currentWeekStart = new Date();
        
        function log(message) {
            const consoleDiv = document.getElementById('console');
            consoleDiv.innerHTML += new Date().toLocaleTimeString() + ': ' + message + '<br>';
            consoleDiv.scrollTop = consoleDiv.scrollHeight;
            console.log(message);
        }

        function updateDayCounter(type) {
            const dayButtons = document.querySelectorAll(`.day-button[data-type="${type}"]`);
            const selectedCount = document.querySelectorAll(`.day-button[data-type="${type}"].selected`).length;
            const totalCount = dayButtons.length;
            
            const countElement = document.getElementById(`${type}Count`);
            if (countElement) {
                countElement.textContent = `${selectedCount}/${totalCount} Tage`;
            }
            log(`Updated ${type} counter: ${selectedCount}/${totalCount}`);
        }

        function initializeDayTracking() {
            const dayButtons = document.querySelectorAll('.day-button');
            log(`Found ${dayButtons.length} day buttons to initialize`);
            
            dayButtons.forEach((button, index) => {
                log(`Setting up button ${index + 1}: ${button.textContent} (${button.dataset.type}, day ${button.dataset.day})`);
                
                button.addEventListener('click', function() {
                    const type = this.getAttribute('data-type');
                    const day = this.getAttribute('data-day');
                    const isSelected = this.classList.contains('selected');
                    
                    log(`Button clicked: ${type} day ${day}, currently selected: ${isSelected}`);
                    
                    // Toggle selection
                    if (isSelected) {
                        this.classList.remove('selected');
                        log(`Removed 'selected' class from ${type} day ${day}`);
                    } else {
                        this.classList.add('selected');
                        log(`Added 'selected' class to ${type} day ${day}`);
                    }
                    
                    // Update counter
                    updateDayCounter(type);
                });
            });
            
            // Initialize counters
            updateDayCounter('sport');
            updateDayCounter('nutrition');
            updateDayCounter('work7am');
        }

        document.addEventListener('DOMContentLoaded', function() {
            log('DOM Content Loaded - initializing day tracking test');
            initializeDayTracking();
        });
    </script>
</body>
</html>